# 如何使用 U2F 保护 WordPress 网站免受钓鱼攻击？

> 原文：<https://medium.com/visualmodo/how-to-protect-wordpress-sites-from-phishing-using-u2f-9bf2fc4c6499?source=collection_archive---------0----------------------->

U2F 是一种认证标准，让用户可以使用安全密钥立即安全地访问他们的在线帐户，并基本上使您的网站免受网络钓鱼的攻击——无需驱动程序或客户端软件。您只需向支持该协议的在线服务注册一个物理设备。它由谷歌和 Yubico 创建，现在由 T2 FIDO 联盟主办。

基本上，U2F 安全密钥是看起来像闪存盘的物理 USB 密钥。您只能在钥匙插上电源时点击钥匙来访问您的帐户。作为最终用户，它感觉像是一个用于双因素身份认证的专用设备。你不用使用手机和认证程序，而是随身携带一把实体钥匙。

![](img/6f0b6ac3edce7b63bf0b65acffe03e2f.png)

# 双因素身份认证的优势

U2F 安全密钥保护免受各种类型的黑客攻击和攻击:会话劫持、中间人、恶意软件攻击，最明显的是网络钓鱼(模仿合法帐户的网站或电子邮件，目的是欺骗您共享您的凭据)。

我想你永远不会成为网络钓鱼的受害者。你觉得你太聪明了吗？根据这份报告，[97%的消费者无法正确识别钓鱼邮件](https://www.comparitech.com/blog/vpn-privacy/phishing-statistics-facts/#As_of_2015_97_percent_of_consumers_could_not_corectly_identify_phishing_scam_emails_The_McAfee_survey_had_19000_respondents_from_around_the_world_highlight_the_global_impact_of_phishing_scam_emails_in_general_Source_McAfee)。百分之九十七？

像 YubiKey 这样的实体钥匙，你的登录信息不会被模仿的登录屏幕获取，因为它只在注册网站上有效。即使你被骗以为是真的，虚假网站的认证也会失败。

这极大地缓解了日益增长的网络钓鱼攻击的数量和复杂性，并阻止了帐户接管。

# U2F 安全钥匙功能

一旦你设置了你的安全密钥，你唯一需要做的就是把它插入你的电脑(或点击手机！)并按下一个按钮。

对于这篇文章，我不想迷失在技术细节中，但是在高层次上，安全密钥支持两个命令，它们作为浏览器 API 提供给网页:

注册—您的安全密钥生成一个新的非对称密钥对，并返回公钥。服务器将这个公钥与您的物理密钥和用户帐户相关联。身份验证—当您登录时，您的安全密钥将测试 u 盘和您的实际存在。如果通过验证，将发送私钥来解锁您的帐户。

如果你想了解更多细节，谷歌发布了这篇[论文](http://fc16.ifca.ai/preproceedings/25_Lang.pdf)。对于更懂技术的人来说，YubiKeys 的完整规格可以在 fidoalliance.org 的[找到。](https://fidoalliance.org/)

# U2F 和 WordPress 安全

鉴于这是一个实验，我不是超级技术，我不准备攻击手动设置。我在 WordPress.org 上搜索了一个免费插件选项。搜索很快就结束了。目前 WordPress 没有太多的选项或信息，所以我选择了最流行的免费选项，[双因素](https://wordpress.org/plugins/two-factor/)。

现在有了我的新钥匙和插件，我想，“这应该不会太难”。那么，WordPress 如何使用 U2F 和物理安全密钥呢？

*   转到用户->您的个人资料页面
*   向下滚动。你会看到一些新的功能。在帐户管理下，现在应该有双因素选项可用。
*   启用 FIDO U2F 并设为主要
*   向下滚动至安全密钥，然后按注册新密钥按钮
*   插入您的 FIDO U2F 安全密钥并点击上面的圆形按钮
*   等待页面刷新，然后单击更新配置文件

看起来很简单。但是我一直卡在第五步。这些说明首先假设您的密钥已注册。

这并不复杂，但它让我犯了个错误。因此，这里是我的“noobs 指南”,为 WordPress 设置 U2F:

1.  一旦你有了钥匙，第一步就是[注册谷歌](https://support.google.com/accounts/answer/6103523?hl=en&ref_topic=6103521&visit_id=636754887499000629-4171538940&rd=1)
2.  要在 [WordPress](https://visualmodo.com/wordpress-themes/) 上设置 U2F，你必须以管理员身份登录
3.  使用支持 U2F 的浏览器(推荐使用谷歌 Chrome。确保您拥有最新版本。)
4.  U2F 需要一个 [HTTPS 连接](https://visualmodo.com/https-make-site-secure/)
5.  您不能通过 HTTP 添加新的安全密钥

# 那是多少钱？

虽然它很容易实现，但也有一些缺点。

这种安全级别不是免费的，向需要访问您站点的每个人提供安全密钥可能会很昂贵——尤其是对于大型团队。钥匙的价格从 20 美元到 50 美元不等。另外，建议您[为您的每个用户保留一个备份密钥](https://support.yubico.com/support/solutions/articles/15000006444-losing-your-yubikey)，以防他们的密钥丢失、损坏或被盗。如果你管理一个 10 人的团队，就需要 20 把钥匙。恰恰。

如果成本不令人望而却步，下一个挑战是安全密钥仍然没有被广泛采用。随着使用的增加，为其他系统设置安全密钥可能是一个痛苦而漫长的过程。好消息是情况正在改善，在谷歌、脸书或 Twitter 上设置安全密钥相当简单。

# 管理

团队或开发机构要考虑的另一件事是管理。密钥创建了更复杂的员工和客户入职流程。这也意味着要找到一个负责安装和恢复的人。你好，中层管理人员。

这可能是最明显的障碍，没有安全密钥你无法访问你的网站。这有利于网站的安全性，但可能不利于方便性。假设你刚到公司，发现你把钥匙忘在家里了。你不能叫人口述一次性密码——因为，没有勺子密码！这可能意味着多开几个小时的车，这将抵消你在一天中通过使用 U2F 而“偷走”的所有额外时间。

最后，向你的 WordPress 客户端分发安全密钥，显然是一个潜在的问题。那么，为什么不在我的手机上安装一次性密码(OTP)或 2FA 呢？这些都是有效的选择，但也有一些缺点。

# U2F 与 OTP 的对比

一次性密码(OTP)是一次性使用的短数字代码，通过短信发送或在单独的物理设备上生成。虽然它们比普通密码更安全，但 OTP 并不完美:

*   他们容易受到网络钓鱼和中间人攻击
*   你必须为每个网站/密码携带一个加密狗
*   短信可以被拦截

简而言之，这不是一个 100%的保障计划。虽然它提供了另一层安全，如果有人通过网络钓鱼访问你的电子邮件或信息帐户，他们仍然可以通过 OTP 代码访问你(或你的客户)的 WordPress 后端。

# 2FA 与移动设备

如果你在智能手机上使用谷歌认证器这样的 2FA 应用，你可能会问这个问题。简短的回答:2FA 没有任何问题，事实上，如果设置得当，它提供了一个很好的安全层。这可以通过禁用 OTP 选项之类的事情来加强——虽然不太方便，但更安全。

2FA 更灵活，但是如果你以方便的名义留下恢复选项，它可能会给你留下一种错误的安全感。

U2F 安全密钥相对于智能手机的优势:在通用计算平台上，保护应用程序逻辑免受恶意软件攻击是很困难的。在电池耗尽或没有服务的情况下，电话可能无法接通。与大多数智能手机不同，YubiKeys 是防水的，可以让你在雨中亲吻

# 物理安全密钥

对于大多数 WordPress 用户来说，手机上带有 Google Authenticator 的 Defenders 2FA 已经足够了。专用安全密钥提供了针对网络钓鱼和中间人攻击的专用保护，并且一旦您设置并习惯了它们，可以说会更快更容易使用，但让我们面对现实吧，普通人可能真的不需要 YubiKey。

# 结论

也就是说，如果你在一个高知名度的客户网站上运行一个有多个管理员的机构，可能是时候为你的团队考虑物理密钥了。

谷歌自己的 U2F 案例研究显示，除了成为“无网络钓鱼区”，他们还注意到员工生产率提高，与电话认证相比支持减少，甚至拥有成本更低。

物理钥匙的优势随着使用钥匙的员工/客户数量以及每个用户开始的日常会话数量的增加而增加。