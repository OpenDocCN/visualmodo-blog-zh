# 谷歌灯塔使用指南

> 原文：<https://medium.com/visualmodo/google-lighthouse-usage-guide-9c1f3bf20eeb?source=collection_archive---------0----------------------->

2018 年初，谷歌发布了一款名为 Lighthouse 的 SEO 工具，该工具提供了关于如何提高页面质量的见解。Google Lighthouse audit 是一个开源的自动化工具，可以检查页面的性能、可访问性等等。

你经常一起听到的两个词是移动和网站速度。这并不是没有原因的，因为这两者是相辅相成的。作为 SEO、开发者和网站所有者，移动友好性和网站速度是我们必须处理的一些最紧迫的问题。测量页面速度一直是一种黑暗的艺术。我们今天使用的网站速度工具已经足够了，但另一个工具正试图从一个不同的，更现实的角度来看它:谷歌灯塔。在这里，我将仔细看看如何检查您的移动网站速度和搜索引擎优化与谷歌灯塔。

# 谷歌灯塔？

![](img/6b34749edf3cb440d52b82b52e3722f5.png)

Lighthouse 是谷歌开发的一个工具，最初是用来审计渐进式网络应用(PWA)的。该工具针对可访问性、性能、渐进式网络应用和最佳实践扩展列表执行四项审计。最近，谷歌甚至增加了一个基本的搜索引擎优化检查。总之，这些给你一个很好的概述你的网站或网络应用的质量和性能。

网站速度关乎感知和用户体验。如果你的网站仍然感觉很慢，数字上的速度没有任何意义。世界各地的大量用户使用的是相当糟糕的 3G 或更低的移动连接。即使有快如闪电的 4G 网络连接，一个网站也可能只是感觉落后和缓慢。我们都知道一个速度慢的网站会对你的转化率产生毁灭性的影响。将加载你的网站所需的时间减少几毫秒会带来很大的不同。

在测试过程中，Google Lighthouse 模拟了通过一个不稳定的 3G 连接在一个稍显不足的设备上访问你的移动网站。为了尽可能真实地模拟真实世界的条件，数据包会丢失。运行测试后，您将获得一份报告，其中包含分数和需要解决的问题的可行建议。诚然，谷歌最近更新和重新设计的[测试我的网站](https://testmysite.withgoogle.com/intl/en-gb)更加漂亮，但也不够全面。

# PageSpeed Insights 与 Google Lighthouse

PageSpeed Insights 可能是最常用的网站速度分析工具。虽然它给了你一个很好的分数和一个可能改进的列表，但它也给了你一个网站加载速度的概念。此外，PageSpeed Insights 给出了建议，但这些建议很难实施，如果不是不可能的话——对大多数网站来说，获得 100/100 是一个白日梦。

PageSpeed Insights 关注的两件最重要的事情:

*   **第一次内容丰富的描绘:**这是在用户看到页面的视觉反应之前所花费的时间。
*   **DOM 内容加载:**这是完全解析和呈现一个 HTML 文档所花费的时间，即。请求的页面。

Lighthouse 采取了更实际的方法，将用户体验放在首位。它通过一个节流的 3G 连接访问你的网站，因此它可以模拟真实世界中真实访问者的体验。Lighthouse 并不像 PageSpeed Insights 那样只是加载你的网站，而是检查它如何以及何时对输入做出响应。它会找到您的内容可以使用的确切时间，因此当它感觉太慢时，您可以尝试并优化它。

# 结果

加速你的移动网站的整个概念是双管齐下的；你的站点必须*快*，而且必须*感觉*快。因此，你需要尽可能快地把你的内容显示在屏幕上。不要让人等。此外，用户必须能够尽快与您的内容进行交互。自从 [Google](https://visualmodo.com/) 宣布页面速度是 SEO 的排名因素，你需要修复这些问题。

你应该优先考虑什么？首先加载您的内容。令人敬畏的图形和杀手动画可以等待。你的信息——以及人们在寻找什么——很可能就在内容中。您可以在后台加载其余的内容，稍后在屏幕上轻松显示。

# 使用的指标

在衡量您的移动网站的性能时，Lighthouse 使用以下指标:

*   **第一个有意义的绘画:**这决定了第一个有意义的内容出现在屏幕上需要多长时间。分数越低，该页面显示得越快。
*   **第一次交互:**这衡量一个页面何时是最小交互的。这决定了大多数 UI 元素是否是交互式的，以及屏幕是否合理地响应用户输入。
*   **持续交互:**这衡量一个页面何时是完全交互的。
*   **感知速度指数:**这个速度指数显示了一个页面的内容被可视化填充的速度。它的目标加载时间也是 1250 毫秒。
*   **估计延迟输入:**这衡量你的页面响应用户输入需要多长时间。高延迟会导致页面感觉缓慢或滞后。这里的目标是< 50 毫秒。
*   **关键请求链:**这个网络瀑布显示了最初呈现这个页面需要哪些资源。确定关键渲染路径中的资源加载优先级，以加快页面速度。

灯塔报告还提供了一些提高移动网站速度的机会，包括可以节省多少加载时间。这些包括减少渲染阻塞样式表、渲染阻塞脚本、适当调整图像大小和修复屏幕外图像。

总而言之，Lighthouse 让您对页面的性能有了大量的了解。将这些见解用于你的优势。

# 灯塔搜索引擎优化检查

Lighthouse 的最新功能是一个基本的搜索引擎优化检查。通过这项检查，你可以运行一个简单的搜索引擎优化审计来发现一个网站可能存在的基本搜索引擎优化问题。它还会给你一些修复它们的建议。因为 Lighthouse 在您的浏览器中本地运行，所以您也可以在您的登台环境中运行检查。

谷歌表示，搜索引擎优化检查仍在进行中，目前只支持最基本的搜索引擎优化检查。他们积极听取用户的反馈以改进它，并增加检查以给 SEO 带来价值。

目前，灯塔检查:

*   它有带`width`或`initial-scale`的`<meta name="viewport">`标签吗
*   文档有一个`<title>`元素吗？
*   有元描述吗？
*   页面是否有成功的 HTTP 状态代码？
*   链接有描述性文字吗？
*   文件是否使用清晰的字体大小？
*   页面未被阻止索引吗？
*   文件是否有有效的`hreflang`
*   文件是否有有效的`rel=canonical`
*   有没有不想要的插件？

此外，它建议手动运行一些额外的检查。其中包括[谷歌手机友好测试](https://search.google.com/test/mobile-friendly)和[结构化数据测试工具](https://search.google.com/structured-data/testing-tool/)。

# 如何安装谷歌灯塔

开始使用 Google Lighthouse 非常容易，因为它内置在 Chrome 的开发者工具审计面板中(Mac:Shift+Cmd+I . Win:Ctrl**+**Shift+J 或 F12)。从那里，您可以运行测试并获得完整的报告。此外，Lighthouse 还有一个单独的 Chrome 插件，可以在你的工具栏上添加一个按钮，不过使用方法是一样的。

您也可以将 Lighthouse 作为一个[节点](https://nodejs.org/en/)包来运行。这样，您可以将测试合并到您的构建过程中。当使用节点包时，您还会看到有一些审计只在节点环境中工作，而不在 DevTools 的审计面板中工作。

要从命令行全局安装 Lighthouse，请使用:

`npm install -g lighthouse`

如果您想对 https://example.com 的[进行测试，请使用:](https://example.com)

`lighthouse [https://example.com](https://example.com)`

审计的完整结果将在终端中可用，但也在一个单独的 HTML 文件中。

# 测试站点

是时候检验灯塔了。让我们看看当我把灯塔的聚光灯照在 yoast.com 上时会发生什么。有些审计对渐进式网络应用最有用。现在，Yoast.com 还不能作为 web 应用程序使用，所以我们在这里只关注性能选项卡。此选项卡显示您的网站或应用程序当前的运行情况，并向您展示改进的方法。

在下面的截图中，你可以看到 yoast.com 的结果。当内容第一次出现在屏幕上时，网站的初始加载通过一个条显示出来。它显示内容变得可见需要多少毫秒。越快越好。

在该图下方，您可以找到最重要的信息，用绿色、橙色或红色条来表示性能的好坏。如前所述，当你想优化你的移动站点的性能时，你需要观察第一次有意义的描绘、第一次交互和持续交互的数字。此外，尝试降低感知速度指数和估计延迟。

从成绩来看，你可以看到 visualmodo.com 以 75 分的总分表现不错。第一个有意义的画图可以好一点，但是第一个交互和持续交互都不错，4,360ms。它们甚至同时发生。这是一个好消息，因为这个网站在互动的时候是完全可用的。在第一次有意义的绘画和第一次互动之间也没有太多的时间。虽然这些分数是合理的，但感知速度可以更高。换句话说，该网站看起来相当快，但在外观部分仍需要一些加速。

# 实现站点速度修复

你可以做很多事情来提高你的网站速度。虽然解释所有的修复超出了本文的范围，但大多数优化可以在关键的渲染路径中找到。关键的呈现路径是由对象(如 CSS 和 JavaScript)形成的，这些对象必须在内容显示在屏幕上之前加载。如果此内容被阻止，您的页面将呈现缓慢或根本不呈现。注意这一点，保持道路畅通。谷歌的伊利亚·格里戈利克写了一本关于如何理解和改善关键渲染路径的指南。请不要忘记优化您的图像！

# 试验

Google Lighthouse 并不是一个能统治所有网站的速度工具，但是它是你的工具箱中一个非常有价值的补充。搜索引擎优化检查是基本的，但仍然是受欢迎的。我们知道 PageSpeed Insights 是一个相当静态的工具，它给你一个网站性能的高层次概述。然而，Lighthouse 的粒度更细，可以根据实际使用情况为您提供即时反馈。你应该把它和你的其他页面速度测试工具一起使用，比如[网页测试](https://www.webpagetest.org/)和 [GTmetrix](https://gtmetrix.com/) 。

你在用谷歌灯塔吗？你是怎么找到它的？请在评论中分享你的经验和技巧。希望收到您的来信！