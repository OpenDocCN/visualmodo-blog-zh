# WordPress 延迟加载实现指南

> 原文：<https://medium.com/visualmodo/wordpress-lazy-loading-implementation-guide-da35cf397757?source=collection_archive---------0----------------------->

您想在 WordPress 中对图像使用惰性加载吗？惰性加载允许您的网站仅在用户向下滚动到特定图像时加载图像。你可以在很多热门网站上看到它的运作，比如 Buzzfeed。在本文中，我们将向您展示如何在 WordPress 中轻松加载图像。

# 为什么偷懒加载很重要？

![](img/b2956eb4f04c7036b70d35094137e103.png)

网页的巨大负载主要由图像、脚本、样式表、字体和视频组成。然而，图像占据了典型网页大小的 60%以上。图像对网页的设计也很重要，所以你不能把它们去掉。

在没有任何优化的情况下，用户的网络浏览器会在完全呈现页面之前下载所有资源。这会导致加载时间增加，这会吸引人们离开。WooCommerce 估计，每提高 100 毫秒的页面速度，一个电子商务网站就能增加 1%的收入。

在这种情况下，不惜一切代价[优化你的负载时间](https://visualmodo.com/top-reasons-why-you-need-to-select-a-good-wordpress-theme/)很有意义。由于图像是网页大小的主要因素，从图像开始是一个好主意。这就是懒惰加载发挥作用的地方。

# 从头开始实现延迟加载

让我们先看看如何在不使用任何插件的情况下做到这一点。对于那些不习惯 JavaScript 的人，建议使用此选项。理想情况下，需要采取以下步骤:

页面加载时防止图像加载:当您在标签的 src 属性中指定图像的 URL 或路径时，图像将在页面加载时由浏览器下载。为了防止浏览器下载图像，您需要在标签的 data-src 属性中指定图像的位置。

在 JavaScript 中注册事件处理函数，检查两个事件的元素:加载和滚动。当元素进入视口时，将 data-src 元素的值加载到 src 元素中，这将触发浏览器加载图像。Robin Osborne 已经解释了这个过程的一个简单实现，这个演示可以在 CodePen 上找到。

# 使用交叉观察器应用编程接口

相交观察者应用编程接口帮助识别在任何给定时间点处于视口中的 DOM 元素。这是一种在不编写事件处理函数的情况下实现惰性加载的更干净的方法。实现惰性加载的代码行数也大幅下降。然而，浏览器兼容性仍然是一个问题。此外，谷歌开发者博客通过这个代码笔演示解释了交集观察者应用编程接口的实现。

# 使用 JavaScript 插件

上面讨论的两个选项需要 JavaScript 的中级知识。如果你正在寻找一个更简单的延迟加载实现，而不是使用一个沉重的插件来增加服务器的负载，你可以试试普通的 JavaScript 插件 bLazy。

小于 2 KB 的 bLazy 库不会给有效负载增加额外的负载，同时允许您轻松处理延迟加载图像。因此，要使用 bLazy 库，您需要用以下属性初始化元素:

class:将所有标签的类设置为 b-lazy
src:链接到占位符图像
data-src:链接到要加载的图像
data-src-small:链接到要在小于 420 像素宽的屏幕上加载的图像

最后，你只需要用几行代码[初始化 bLazy 库](https://visualmodo.com/5-signs-you-need-web-development-help/)，所有的图片都将通过延迟加载完成。

> <脚本>
> ；(function() {
> //初始化
> var bLazy = new bLazy()；
> })()；
> </脚本>

# 使用 WordPress 懒惰加载插件

所有这些插件都会自动为你处理延迟加载。每一款都有一些不错的特性。例如，WP Rocket 的惰性加载也惰性加载 YouTube 视频，并用缩略图替换它们。

Optimole 除了是 ThemeIsle 家族的最新成员之外，还为您提供了坚如磐石的图像优化(如这里测试的那样),在这方面具有相当先进的功能。例如，它可以根据用户的屏幕大小动态调整大小。Optimole 的图像优化和延迟加载。像大多数插件一样，要获得延迟加载，只需安装插件并在插件的控制面板中启用该功能: